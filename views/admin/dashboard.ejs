<!-- Admin dashboard -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <title>Admin Dashboard</title>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      .navbar-brand img {
        border-radius: 50%;
        object-fit: cover;
      }
    </style>
  </head>
  <body class="p-3 m-0 border-0 bd-example m-0 border-0">
    <!-- Header with nav -->
    <header>
      <nav class="navbar navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="/image/logo.jpg" alt="Logo" width="30" height="30" class="d-inline-block align-text-top">
            Admin Dashboard
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Menu</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="/admin/dashboard">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/admin/manageRecipes">Manage Recipes</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/admin/manageUsers">Manage Users</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/" onclick="return confirm('Are you sure you want to log out?');">Logout</a>
                </li>
              </ul>
              <form class="d-flex mt-3" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-success" type="submit">Search</button>
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <!-- Main content -->
    <main class="mt-5 pt-3">
      <h1 class="message">Welcome to Admin dashboard</h1>
      <p class="message">Welcome back! Manage your recipes and videos here.</p>
      <p class="message">
     write a paragraph around 500 words about food and nutrition
     Food is a vital part of our lives, and nutrition plays a crucial role in maintaining our overall health. A balanced diet, rich in fruits, vegetables, whole grains, and lean proteins, provides the essential nutrients our bodies need to function optimally. Proper nutrition supports growth, boosts the immune system, and reduces the risk of chronic diseases. It's important to make informed food choices and understand the nutritional value of what we consume. By prioritizing healthy eating habits, we can enhance our well-being and lead a more active and fulfilling life. The importance of food and nutrition cannot be overstated, as they are fundamental to our physical and mental health. A well-balanced diet not only fuels our bodies but also influences our mood, energy levels, and cognitive function. Incorporating a variety of foods ensures that we receive a wide range of vitamins and minerals necessary for optimal health. Additionally, understanding portion sizes and the impact of processed foods can help us make better dietary choices. By embracing a holistic approach to food and nutrition, we can cultivate a healthier lifestyle that supports longevity and vitality.
     Food is not just a source of sustenance; it is also a cultural and social experience that brings people together. Sharing meals with family and friends fosters connections and creates lasting memories. Moreover, food can be a form of self-expression, with diverse cuisines reflecting the rich tapestry of human culture. As we navigate the complexities of modern diets, it is essential to strike a balance between enjoying our favorite foods and making choices that promote health and well-being. By being mindful of our food selections and understanding the nutritional content, we can enjoy the pleasures of eating while also taking care of our bodies.
     In conclusion, food and nutrition are integral to our lives, influencing our health, relationships, and overall quality of life. By making conscious choices about what we eat, we can nourish our bodies and minds, leading to a healthier and more fulfilling existence. Embracing a diverse and balanced diet, while also appreciating the cultural significance of food, allows us to enjoy the best of both worlds. Let's celebrate the joy of cooking, sharing, and savoring meals that not only taste good but also contribute to our well-being. By doing so, we can cultivate a deeper appreciation for the importance of food and nutrition in our lives and the positive impact it has on our health and happiness. 
      </p>

      <!-- Recipes Table -->
      <h3>Recipes</h3>
      <!-- In your admin dashboard template (likely views/admin/dashboard.ejs or similar) -->
<table border="1" cellpadding="5" cellspacing="0" class="table table-bordered">
  <thead>
    <tr>
      <th>Title</th>
      <th>Ingredients</th>
      <th>Instructions</th>
      <th>Actions</th>
      <th>Image</th> <!-- This is the column header for images -->
    </tr>
  </thead>
  <tbody>
    <% if (recipes && recipes.length > 0) { %>
      <% recipes.forEach(recipe => { %>
        <tr>
          <td><%= recipe.title %></td>
          <td><%= recipe.ingredients %></td>
          <td><%= recipe.instructions %></td>
          <td>
            <a href="/admin/manageRecipes?editId=<%= recipe._id %>" class="btn btn-secondary btn-sm">Edit</a>
            <form action="/admin/manageRecipes" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this recipe?');">
              <input type="hidden" name="recipeId" value="<%= recipe._id %>">
              <input type="hidden" name="action" value="delete">
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
          </td>
          <!-- REPLACE THE IMAGE CELL WITH THIS CODE -->
          <td>
            <% if (recipe.imageUrl) { %>
              <img src="<%= recipe.imageUrl.startsWith('http') ? recipe.imageUrl : '/uploads/' + recipe.imageUrl %>" 
                   alt="<%= recipe.title %>" 
                   style="width: 100px; height: 100px; object-fit: cover;"
                   onerror="this.onerror=null;this.src='/images/default-food.jpg';">
            <% } else { %>
              <span class="text-muted">No Image</span>
            <% } %>
          </td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr>
        <td colspan="5">No recipes found.</td> <!-- Update colspan to 5 since we now have 5 columns -->
      </tr>
    <% } %>
  </tbody>
</table>

      <!-- Videos Table -->
      <section>
        <h2>Videos List</h2>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Title</th>
              <th>Description</th>
              <th>Video URL</th>
              <th>Published</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% videos.forEach(video => { %>
              <tr>
                <td><%= video.title %></td>
                <td><%= video.description %></td>
                <td><a href="<%= video.video_url %>" target="_blank">View Video</a></td>
                <td><%= video.published ? 'Yes' : 'No' %></td>
                <td>
                  <a href="/admin/manageRecipes?editId=<%= video._id %>" class="btn btn-sm btn-warning">Edit</a>
                  <form action="/admin/manageVideos" method="POST" style="display:inline;">
                    <input type="hidden" name="action" value="delete">
                    <input type="hidden" name="videoId" value="<%= video._id %>">
                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this video?');">Delete</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </section>
    </main>
    <%- include('../partials/footer') %>
  </body>
</html>
